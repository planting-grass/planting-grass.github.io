---
title: 2026-01-06
author: 김희수
date: 2026-01-06
category: TIL/김희수/2026/01 
layout: post
---

<br/>

## 클로저란?
### 정의
- 함수가 선언될 때의 스코프를 기억하여, 함수가 생성된 이후에도 그 스코프에 접근할 수 있는 기능
- 함수가 선언될 당시의 렉시컬 스코프를 기억해서, 함수 외부의 변수를 함수 실행 이후에도 접근할 수 있게 해주는 자바스크립트의 특성


### 기본예제

```javaScript
function outer() {
  let count = 0;

  return function inner() {
    count++;
    return count;
  };
}

const counter = outer();

counter(); // 1
counter(); // 2

```
- outer는 실행이 끝났지만
- inner가 count를 참조하고 있어서
- count는 계속 살아 있다 → 클로저

### 클로저의 활용
- 데이터 은닉에 활용됨 (상태은닉, 캡슐화)
    ```javaScript
    function createCounter() {
        let count = 0;

        return {
            increase() {
            count++;
            },
        getCount() {
            return count;
            }
        };
    }

    const counter = createCounter();
    counter.increase();
    counter.getCount(); // 1

    ```
    상태를 외부에서 직접 수정하지 못하게 보호 가능 (전역 변수 없이 상태를 유지)

- 비동기 작업에 활용됨 (이벤트 핸들러에서 상태 유지)
    ```javascript
    function attachHandler() {
        let clicked = false;

        button.addEventListener('click', () => {
        if (!clicked) {
            console.log('처음 클릭');
            clicked = true;
        }
        });
    }
    ```
    - 이벤트가 나중에 실행돼도
    - 선언 당시의 clicked 상태를 기억한다

### 동작원리

자바스크립트는 함수가 선언될 때 스코프가 결정되는 렉시컬 스코프 언어다.
내부 함수가 외부 함수의 변수를 참조하고 있으면, 외부 함수 실행이 끝난 뒤에도 그 변수는 가비지 컬렉션되지 않고 메모리에 유지된다.
이 상태를 클로저라고 부른다.


### React와의 연결
React의 함수 컴포넌트와 useState, useEffect도 클로저 기반으로 동작한다.
```javascript
const [count, setCount] = useState(0);
```
- 컴포넌트 함수가 다시 실행돼도
- 이전 상태를 기억하는 이유 → 클로저
```javascript
useEffect(() => {
  setInterval(() => {
    console.log(count);
  }, 1000);
}, []);
```
- count는 초기값만 기억
- 클로저가 생성된 시점의 값이 고정됨
- 아래를 이용해 해결
```javascript
setCount(prev => prev + 1);
```

특히 useEffect에서 이전 상태를 참조하는 문제(stale closure)는 클로저 이해가 없으면 디버깅이 어렵다.

### 단점
- 클로저는 메모리를 계속 참조하므로
- 이벤트 제거, 타이머 정리 등을 하지 않으면 메모리 누수 위험이 있다


### 요약
클로저는 상태를 은닉하거나 비동기 환경에서 실행 맥락을 유지할 때 많이 활용된다.
특히 이벤트 핸들러나 React 훅처럼 함수가 나중에 실행되는 환경에서, 선언 당시의 값을 기억해야 할 때 핵심적인 역할을 한다.


### 참고자료
- [기술면접을 계기로 다시 본 클로저](https://kasterra.github.io/closure-basics/)
- [JS 클로저(Closures)와 리액트의 훅(useState)의 관계](https://dev-hyonie.tistory.com/48#dt01)
- [리액트에서 클로저가 어떻게 사용되고 있는가?](https://chaeyoung2.tistory.com/152)